<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Coronavirus Update (Live)</title>
    <link rel="icon" href="image/earth.jpg">


    <!-- ================= Favicon ================== -->
    <!-- Standard -->
    <!-- Retina iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="144x144" href="http://placehold.it/144.png/000/fff">
    <!-- Retina iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="114x114" href="http://placehold.it/114.png/000/fff">
    <!-- Standard iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="72x72" href="http://placehold.it/72.png/000/fff">
    <!-- Standard iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="57x57" href="http://placehold.it/57.png/000/fff">

    <!-- Styles -->
    <link href="country/assets/css/lib/weather-icons.css" rel="stylesheet" />
    <link href="country/assets/css/lib/owl.carousel.min.css" rel="stylesheet" />
    <link href="country/assets/css/lib/owl.theme.default.min.css" rel="stylesheet" />
    <link href="country/assets/css/lib/font-awesome.min.css" rel="stylesheet">
    <link href="country/assets/css/lib/themify-icons.css" rel="stylesheet">
    <link href="country/assets/css/lib/menubar/sidebar.css" rel="stylesheet">
    <link href="country/assets/css/lib/bootstrap.min.css" rel="stylesheet">

    <link href="country/assets/css/lib/helper.css" rel="stylesheet">
    <link href="country/assets/css/style.css" rel="stylesheet">
    
    <link href="https://unpkg.com/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v5.12.1/css/all.css" rel="stylesheet">
    <link href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-dark" style="background-color:rgb(24, 68, 212);">
        <a class="navbar-brand" href="country.html">COVID-19</a>
        <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
          aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation"></button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Home </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html">About</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="chart.html">Chart</a>
              </li>
            <li class="nav-item">
              <a class="nav-link" href="survey.html">Survey</a>
            </li>
           </ul> 
          </div>
      </nav>
    <div class="content-wrap">
        <div class="main">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-8 p-r-0 title-margin-left">
                        <div class="page-header">
                            <div class="page-title">
                                <h1>Coronavirus Update <span>(Live)</span></h1>
                            </div>
                        </div>
                    </div>
                    <!-- /# column -->
                    <div class="col-lg-4 p-l-0 title-margin-left ">
                        <div class="page-header">
                            <div class="page-title">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                                    <li class="breadcrumb-item active">Live</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- /# column -->
                </div>

                <div class="container-fluid mt-2">
                    <div id="toolbar">
                        <h3>COVID-19 Update <span>(Live)</span></h3>
                    </div>
                    <table id="table" data-toolbar="#toolbar" data-search="true" data-show-toggle="true"
                        data-show-columns="true" data-show-columns-toggle-all="true" data-show-export="true"
                        data-sort-name="totalcases" data-sort-order="desc" data-show-pagination-switch="true"
                        data-pagination="false" data-page-list="[10, 25, 50, 100, all]" data-show-footer="true">
                    </table>
                </div>

                <!-- jquery vendor -->
                <script src="country/assets/js/lib/jquery.min.js"></script>
                <script src="country/assets/js/lib/jquery.nanoscroller.min.js"></script>
                <!-- nano scroller -->
                <script src="country/assets/js/lib/menubar/sidebar.js"></script>
                <script src="country/assets/js/lib/preloader/pace.min.js"></script>
                <!-- sidebar -->
                <script src="country/assets/js/lib/bootstrap.min.js"></script>
                <!-- scripit init-->
                <script src="country/assets/js/lib/vector-map/jquery.vmap.min.js"></script>
                <!-- scripit init-->
                <script src="country/assets/js/lib/vector-map/jquery.vmap.sampledata.js"></script>
                <!-- scripit init-->
                <script src="country/assets/js/lib/vector-map/vector.init.js"></script>
                <script src="https://unpkg.com/jquery@3.4.1/dist/jquery.min.js"></script>
                <script src="https://unpkg.com/popper.js@1.16.0/dist/umd/popper.min.js"></script>
                <script src="https://unpkg.com/bootstrap@4.4.1/dist/js/bootstrap.min.js"></script>
                <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
                <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>
                <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table-locale-all.min.js"></script>
                <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
                <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/extensions/export/bootstrap-table-export.min.js"></script>

                <script>
                    axios.get('https://api.covid19api.com/summary').then(function (response) {
                        var rawData = myData(response.data.Countries);
                        myTable(rawData);
                    }).catch(function (error) {
                        console.log(error);
                    })

                    function myData(data) {
                        var list = [];
                        data.forEach(function (item) {
                            list.push({
                                country: '<img src="country/flags/' + item.CountryCode.toLowerCase() + '.svg" width="36"> ' + item.Country, //github.com/rinvex/countries
                                newcases: item.NewConfirmed,
                                totalcases: item.TotalConfirmed,
                                newdeaths: item.NewDeaths,
                                totaldeaths: item.TotalDeaths,
                                newrecoveries: item.NewRecovered,
                                totalrecoveries: item.TotalRecovered,
                                lastupdate: new Date(item.Date).getDate() + '/' + new Date(item.Date).getMonth() + '/' + new Date(item.Date).getFullYear() //.toLocaleString()
                            });
                        });
                        return list;
                    }

                    function myTable(arr) {
                        var myTable = $('#table').bootstrapTable({
                            height: 600,
                            locale: 'en_US',
                            columns: [
                                [
                                    { field: 'country', title: 'Countries and territories', rowspan: 2, align: 'left', valign: 'middle', footerFormatter: countFormatter },
                                    { title: 'Confirmed infections', colspan: 2, align: 'center', valign: 'middle' },
                                    { title: 'Confirmed deaths', colspan: 2, align: 'center', valign: 'middle' },
                                    { title: 'Reported recoveries', colspan: 2, align: 'center', valign: 'middle' },
                                    { field: 'lastupdate', title: 'Date', rowspan: 2, align: 'center', valign: 'middle' }
                                ],
                                [
                                    { field: 'newcases', title: 'New Cases', sortable: true, align: 'right', formatter: numberFormatter, footerFormatter: totalFormatter },
                                    { field: 'totalcases', title: 'Total Cases', sortable: true, align: 'right', formatter: numberFormatter, footerFormatter: totalFormatter },
                                    { field: 'newdeaths', title: 'New Deaths', sortable: true, align: 'right', formatter: numberFormatter, footerFormatter: totalFormatter },
                                    { field: 'totaldeaths', title: 'Total Deaths', sortable: true, align: 'right', formatter: numberFormatter, footerFormatter: totalFormatter },
                                    { field: 'newrecoveries', title: 'New Recovered', sortable: true, align: 'right', formatter: numberFormatter, footerFormatter: totalFormatter },
                                    { field: 'totalrecoveries', title: 'Total Recovered', sortable: true, align: 'right', formatter: numberFormatter, footerFormatter: totalFormatter }
                                ]
                            ],
                            data: arr
                        });
                        return myTable;
                    }

                    function countFormatter(data) {
                        return data.length
                    }

                    function numberFormatter(value, row) {
                        return value.toLocaleString('en-US');
                    }

                    function totalFormatter(data) {
                        var field = this.field
                        var total = data.map(function (row) {
                            return row[field]
                        }).reduce(function (sum, i) {
                            return sum + i
                        }, 0);
                        return total.toLocaleString('en-US');
                    }
                </script>
</body>

</html>